<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{fragments/header :: header}">
    <meta charset="UTF-8">
</head>
<body class="h-full flex flex-col">
<div th:replace="~{fragments/bodyHeader :: bodyHeader}"></div><br>

<div class="h-full">
    <div class="container mx-auto px-4 py-8">
        <h1 class="text-3xl font-bold mb-6" th:text="${regionMajor} + ' 게시판'"></h1>

        <div class="mb-6 flex justify-between items-center">
            <select id="regionMajorSelect" class="p-2 border rounded">
                <option th:each="board : ${allBoards}"
                        th:value="${board.regionMajor}"
                        th:text="${board.regionMajor}"
                        th:selected="${board.regionMajor == regionMajor}"></option>
            </select>

            <div class="flex items-center space-x-4">
                <select id="searchTypeSelect" class="p-2 border rounded">
                    <option value="">모두</option>
                    <option value="title">제목</option>
                    <option value="content">내용</option>
                    <option value="regionMiddle">지역</option>
                </select>
                <input type="text" id="searchInput" placeholder="검색어 입력" class="p-2 border rounded" th:value="${keyword}">
                <button id="searchBtn" class="bg-blue-500 text-white px-4 py-2 rounded">검색</button>
            </div>
        </div>

        <div class="mb-6 flex justify-start">
            <select id="sortSelect" name="sortSelect" class="border border-gray-300 rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
                <option value="createdAt" th:selected="${sortBy == 'createdAt'}">최신순</option>
                <option value="recommends" th:selected="${sortBy == 'recommends'}">추천순</option>
            </select>

            <button type="button" id="sortButton" class="ml-2 bg-orange-500 text-white py-2 px-4 rounded-md hover:bg-orange-600 transition duration-200">
                정렬
            </button>
        </div>

        <table class="w-full border-collapse border">
            <thead>
            <tr class="bg-gray-100">
                <th class="border p-2">번호</th>
                <th class="border p-2">제목</th>
                <th class="border p-2">작성자</th>
                <th class="border p-2">작성일</th>
                <th class="border p-2">조회</th>
                <th class="border p-2">추천</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="post : ${posts}">
                <td class="border p-2" th:text="${post.postId}"></td>
                <td class="border p-2"><a th:href="@{/board/posts/{id}(id=${post.postId})}" th:text="${post.title}"></a></td>
                <td class="border p-2" th:text="${post.memberName}"></td>
                <td class="border p-2" th:text="${#temporals.format(post.createdAt, 'yyyy-MM-dd')}"></td>
                <td class="border p-2" th:text="${post.views}"></td>
                <td class="border p-2" th:text="${post.recommends}"></td>
            </tr>
            </tbody>
        </table>

        <div class="mt-6 flex justify-center">
            <nav class="inline-flex">
                <a th:each="pageNum : ${#numbers.sequence(1, totalPages)}"
                   th:href="@{/board/{regionMajor}/posts(regionMajor=${regionMajor},page=${pageNum},sortBy=${sortBy},searchType=${searchType},keyword=${keyword})}"
                   th:text="${pageNum}"
                   th:class="${pageNum == currentPage} ? 'px-3 py-2 bg-blue-500 text-white' : 'px-3 py-2 border border-gray-300 bg-white text-gray-500 hover:bg-gray-50'">
                </a>
            </nav>
        </div>
    </div>
</div>

<div th:replace="~{fragments/footer :: footer}"></div>
</body>
<script src="/js/footer.js"></script>
<script src="/js/board_postList.js"></script>
</html>