bumstone
bumstone.
온라인

안창민 — 2024.08.26. 오후 1:29
아 넵 감사합니다!!
bumstone — 2024.08.26. 오후 1:29
아닙니다!
안창민 — 2024.08.26. 오후 6:40
범석님 혹시 post.html 수정 하셨나요??
bumstone — 2024.08.26. 오후 6:59
html은 아직 수정 못했습니다..
안창민 — 2024.08.26. 오후 7:00
엇!! 다행이네요 ㅋㅋㅋㅋㅋ
저 수정을 많이해서..
오히려 다행인것같습니다! ㅎㅎㅋㅋㅋㅋ
bumstone — 2024.08.26. 오후 7:00
앗 그게 다행이됬네요 ㅋㅋ
안창민 — 2024.08.26. 오후 7:03
ㅋㅋㅋㅋ 그르게요
그 수정된 파일 조금있다가 푸시하겠습니다! ㅎㅎ
bumstone — 2024.08.26. 오후 7:04
알겠습니다!!
안창민 — 2024.08.27. 오전 10:35
범석님 저희 조금만 있다가 좋아요 구현 방식 말씀 나눠볼까요~?
bumstone — 2024.08.27. 오전 10:35
넵 알겠습니다
안창민 — 2024.08.27. 오전 10:40
혹시 지금 괜찮으실까요??
bumstone — 2024.08.27. 오전 10:40
네 가능합니다!!
안창민 — 2024.08.27. 오전 10:41
넵 그럼 음성채팅으로 넘어가겠습니다!
안창민 — 2024.08.27. 오후 4:48
범석님 그 좋아요 부분은 저희가 의논한대로 테이블 만들어서 구현했습니다!
bumstone — 2024.08.27. 오후 4:49
와 벌써 구현까지 되었나요?
안창민 — 2024.08.27. 오후 4:49
엇 아까 보내드린대로.. ㅎㅎ
그 아까 보낸 화면에서
페이징 사이즈도 추가했어요
이미지
bumstone — 2024.08.27. 오후 4:49
와 알겠습니다!!
저는 정렬 버튼 두개로 놨는데 참고 해야겠네요
안창민 — 2024.08.27. 오후 4:50
어 혹시 어떻게 구현하셨나요??
bumstone — 2024.08.27. 오후 4:50
최신순 버튼 따로, 추천순 따로 구현했는데
안창민 — 2024.08.27. 오후 4:51
아하
bumstone — 2024.08.27. 오후 4:51
select로 선택하는게 더 깔끔한거 같습니다
안창민 — 2024.08.27. 오후 4:51
감사합니다..
통일성 있는게 좋을것같아서 추가 되는대로 보내드리고 있었습니다..ㅋㅋㅋㅋ
혹시 제꺼 맘에 안드시면 언제든지 말씀해주세요! 수정하겠습니다 ㅎㅎ
bumstone — 2024.08.27. 오후 4:53
알겠습니다
맘에 안드는 부분이 있다면! 말씀드리겠습니다 ㅎㅎ
안창민 — 2024.08.27. 오후 4:53
넵넵 ㅎㅎ 화이팅!!
안창민 — 2024.08.27. 오후 6:32
범석님 그 post.html은 아직 수정안하신게 맞을까요?? dev에서 pull 했는데 혹시 충돌이 일어난건가 싶어서요..!
bumstone — 2024.08.27. 오후 6:47
지금 건들이고 있는데 dev에는 문제 없을 겁니다!
안창민 — 2024.08.27. 오후 6:49
엇 제가 말씀을 잘못드렸네요.. 죄송합니다
충돌이 생겼다는게 아니라 변경이 없어보인다는거였는데 정신이 없어서 완전 반대로 말씀을 드렸네요..ㅠㅠ
죄송합니다
넵 문제없는것도 확인했습니다 감사합니다!!
bumstone — 2024.08.27. 오후 6:49
아 넵!!
안창민 — 2024.08.27. 오후 6:50
넵 이따 뵙겠습니다~~
bumstone — 2024.08.27. 오후 6:51
이따 뵐게요
안창민 — 어제 오전 10:49
범석님 그 regionMajor는 서울, 경기 이런식인건가요??
bumstone — 어제 오전 10:49
네 맞습니다
안창민 — 어제 오전 10:50
넵 감사합니다~
@GetMapping("/post/{postId}")
public String post(@PathVariable("postId") Long postId,
@RequestParam(required = false, value = "commentPage", defaultValue = "1") int commentPage,
@ModelAttribute("commentPagingInfo") CommentPagingInfo commentPagingInfo,
Model model) {
Post post = postService.getPostById(postId);
postService.incrementViews(postId);  // 방문마다 조회수 증가

model.addAttribute("commentRequestDto", new CommentRequestDto());
model.addAttribute("post", post);
model.addAttribute("comments", commentService.findPagedCommentsByPostId(postId, commentPage, commentPagingInfo));
model.addAttribute("averageRating", commentService.getAverageRating(postId));

return "post";
}


이 부분 url은 제가 고칠게요!
bumstone — 어제 오전 10:56
넵 감사합니다
안창민 — 어제 오후 3:26
범석님 postviewcontroller 수정사항이 있나요~~?
bumstone — 어제 오후 3:27
네 아직 올리진 않았지만
modifyPost와 likePost 추가했습니다
안창민 — 어제 오후 3:37
오홍 저도 수정이 있어서 충돌안나게 잘해야될것같습니다..
제가 MR 날리면 말씀드릴게요 혹시 먼저 날리시게 되면 저한테 말씀주세요!
bumstone — 어제 오후 3:37
넵
먼저 하시면 풀하겠습니다
안창민 — 어제 오후 3:37
넵 감사합니다!! 화이팅!
지금 푸시하고 mr 날릴게요! 혹시 아직 안날리셨죠??
bumstone — 어제 오후 3:44
네 아직입니다
안창민 — 어제 오후 3:45
넵 풀 부탁드릴게요 ㅎㅎ
bumstone — 어제 오후 3:45
넵 알겠습니다!
안창민 — 어제 오후 5:06
범석님 이번 mr에서 그 postphotoservice 인가? 거기서 안쓰는 Import 문이 있더라구요
그게 commentPhotosSizeException인가 그랬는데
제가 예외 이름을 바꿔버려서 그 import문도 지우고 푸시했습니다..!
pull 땡겨서 확인해주시면 감사하겠습니다!
bumstone — 어제 오후 5:07
아 감사합니다
확인하겠습니다🫡
안창민 — 어제 오후 5:08
엇 아닙니다..ㅎㅎ 안지우면 에러가 떠버려서 말씀  안드리고 지워버려서 죄송합니다..
bumstone — 어제 오후 5:18
괜찮습니다!
안창민 — 어제 오후 10:40
범석님 저 화장실만 다녀오고 같이 수정해볼까요??
bumstone — 어제 오후 10:40
그래주시면 감사할 것 같습니다
안창민 — 어제 오후 10:41
넵
지금 바로 괜찮으세요??
bumstone — 어제 오후 10:41
넵
안창민 — 어제 오후 10:42
<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org" >
<head th:replace="~{fragments/header :: header}">
    <meta charset="UTF-8">
</head>
<body class="h-full flex flex-col">
확장
message.txt
20KB
bumstone — 어제 오후 10:56
<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org" >
<head th:replace="~{fragments/header :: header}">
    <meta charset="UTF-8">
</head>
<body class="h-full flex flex-col">
확장
message.txt
21KB
안창민 — 어제 오후 11:36
범석님........
ㅋㅋㅋㅋㅋㅋㅋㅋㅋㅋㅋ
bumstone — 어제 오후 11:36
어..
왜 그러시죠?
안창민 — 어제 오후 11:36
안되네요.........
ㅋㅋㅋㅋㅋㅋㅋ
bumstone — 어제 오후 11:36
다시 한번 모일까요?
안창민 — 어제 오후 11:36
ㅋㅋㅋㅋㅋㅋㅋㅋㅋ
넵
얼른 끝내버리죠..!
bumstone — 어제 오후 11:37
예얍
bumstone — 어제 오후 11:44
<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{fragments/header :: header}"></head>
<body class="h-full flex flex-col">
<div th:replace="~{fragments/bodyHeader :: bodyHeader}"></div>
<br>
확장
message.txt
7KB
&lt;
<
bumstone — 오늘 오전 12:01
package cloud4.team4.travelog.domain.post.controller;

import cloud4.team4.travelog.domain.board.dto.BoardViewResponse;
import cloud4.team4.travelog.domain.board.entity.Board;
import cloud4.team4.travelog.domain.board.service.BoardService;
import cloud4.team4.travelog.domain.comment.dto.CommentPagingInfo;
확장
message.txt
6KB
안창민 — 오늘 오전 12:06
Whitelabel Error Page
This application has no explicit mapping for /error, so you are seeing this as a fallback.

Thu Aug 29 00:05:06 KST 2024
There was an unexpected error (type=Internal Server Error, status=500).
Name for argument of type [java.lang.String] not specified, and parameter name information not available via reflection. Ensure that the compiler uses the '-parameters' flag.
java.lang.IllegalArgumentException: Name for argument of type [java.lang.String] not specified, and parameter name information not available via reflection. Ensure that the compiler uses the '-parameters' flag.
at org.springframework.web.method.annotation.AbstractNamedValueMeth
Whitelabel Error Page
This application has no explicit mapping for /error, so you are seeing this as a fallback.

Thu Aug 29 00:05:06 KST 2024
There was an unexpected error (type=Internal Server Error, status=500).
Name for argument of type [java.lang.String] not specified, and parameter name information not available via reflection. Ensure that the compiler uses the '-parameters' flag.
확장
message.txt
3KB
Whitelabel Error Page
This application has no explicit mapping for /error, so you are seeing this as a fallback.

Thu Aug 29 00:05:06 KST 2024
There was an unexpected error (type=Internal Server Error, status=500).
Name for argument of type [java.lang.String] not specified, and parameter name information not available via reflection. Ensure that the compiler uses the '-parameters' flag.
확장
message.txt
3KB
안창민 — 오늘 오전 12:18
package cloud4.team4.travelog.domain.post.controller;

import cloud4.team4.travelog.domain.board.dto.BoardViewResponse;
import cloud4.team4.travelog.domain.board.entity.Board;
import cloud4.team4.travelog.domain.board.service.BoardService;
import cloud4.team4.travelog.domain.comment.dto.CommentPagingInfo;
확장
message.txt
6KB
안창민 — 오늘 오전 12:24
얘 복붙해서 머지 해주세요!
bumstone — 오늘 오전 12:24
넵
안창민 — 오늘 오전 12:26
아
범석님
찾았습니다..
bumstone — 오늘 오전 12:27
어떤건가요!!
안창민 — 오늘 오전 12:27
post.html을 아래로 복붙해주세요오..
<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org" >
<head th:replace="~{fragments/header :: header}">
    <meta charset="UTF-8">
</head>
<body class="h-full flex flex-col">
확장
message.txt
21KB
그 postResponseDto 관련해서
postId가 아니라 그냥 id 로 필드명이
바꼈더라구요..
ㅋㅋㅋㅋㅋㅋ
수정했습니다!
﻿
안창민
anchangmin9999
<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org" >
<head th:replace="~{fragments/header :: header}">
    <meta charset="UTF-8">
</head>
<body class="h-full flex flex-col">
<div th:replace="~{fragments/bodyHeader :: bodyHeader}"></div>
<link rel="stylesheet" href="/css/comment_photos.css">
<link rel="stylesheet" href="/css/comment_paging.css">
<link rel="stylesheet" href="/css/reply.css">
<header>
    <div class="mx-auto max-w-7xl px-4 py-6 sm:px-6 lg:px-8">
        <h1 class="text-3xl font-bold tracking-tight text-gray-900" th:text="${post.title}">게시글 제목</h1>
    </div>
</header>
<div class="h-full">
    <main class="flex flex-col md:flex-row md:w-[90%]"> <!-- 모바일에서는 flex-col, 데스크탑에서는 flex-row -->
        <!-- 게시글 inner part -->
        <div class="md:w-3/5 w-[90%] m-10 bg-gray-50 p-6 shadow-xl rounded-lg flex-shrink-0" style="align-self: flex-start;">
            <div class="flex items-center justify-between">
                <div class="inline-flex items-center">
                    <img src="data:image/jpeg;base64,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" alt="프로필 사진" class="w-12 h-12 rounded-full border-2 border-gray-500">
                    <div class="ml-4">
                        <h2 class="text-xl font-bold text-gray-900" th:text="${post.memberName}">작성자</h2>
                        <p class="text-gray-600" > <strong>여행 일정</strong> <span th:text="${post.periodStart} + ' ~ ' + ${post.periodEnd}"></span> </p>
                        <p class="text-gray-600" > <strong>작성 일자</strong> <span th:text="${#temporals.format(post.createdAt, 'yyyy-MM-dd HH:mm')}"></span> </p>
                    </div>
                </div>
                <div class="flex items-center">
                    <p class="text-gray-600 mr-4"> <strong>조회수:</strong> <span th:text="${post.views}"></span> </p>
                    <p class="text-gray-600"> <strong>추천수:</strong> <span th:text="${post.recommends}"></span> </p>
                </div>
            </div>
            <div class="bg-gray-200 mt-4 mb-4 p-6 rounded-lg">
                <p class="text-gray-700" style="white-space: pre-line; word-break: break-all" th:text="${post.content}">게시글 내용</p>
                <div th:if="${post.photos != null and not #lists.isEmpty(post.photos)}">
                    <p class="text-sm mt-6">첨부한 이미지</p>
                    <div class="img-container grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4">
                        <div class="mt-1" th:each="photo : ${post.photos}">
                            <a href="#" class="image-link" th:data-base64="${photo}" onclick="openImage(this.dataset.base64)">
                                <img th:src="'data:image/jpeg;base64,' + ${photo}"/>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
            <div class="flex justify-between mt-4">
                <!--목록 버튼-->
                <a th:href="@{/boards/{regionMajor}(regionMajor=${regionMajor})}"
                   class="bg-orange-500 text-white px-4 py-2 rounded hover:bg-orange-600 transition duration-200">목록</a>
                <!--추천 버튼-->
                <button th:if="${loginMember != null}"
                        type="button"
                        th:onclick="|location.href='@{/boards/{regionMajor}/posts/{postId}/like(regionMajor=${regionMajor},postId=${post.id})}'|"
                        class="bg-purple-500 text-white px-4 py-2 rounded hover:bg-purple-700 transition duration-200">
                    <span class="material-symbols-outlined" style="font-size: 20px; vertical-align: middle;">thumb_up</span>
                    추천
                </button>

                <div>
                    <!--수정 버튼-->
                    <button th:onclick="|location.href='@{/boards/{regionMajor}/posts/post-modify/{postId}(regionMajor=${regionMajor},postId=${post.id})}'|"
                            class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 transition duration-200 mr-2">수정</button>
                    <!--삭제 버튼-->
                    <button type="button" onclick="deletePost(this)" th:data-postId="${post.id}" th:data-region="${regionMajor}" class="bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600 transition duration-200">삭제</button>
                </div>
            </div>
        </div>
        <div class="w-full md:w-[37%] w-90% mb-10 md:m-10 bg-gray-50 p-6 shadow-xl rounded-lg flex-shrink-0" style="align-self: flex-start;">

            <!--            여행 후기 게시판에만 평균 평점 출력-->
            <div class="flex flex-row justify-start" th:if="${post.boardCategory == '여행후기'}">
                <p class="font-bold text-gray-500 mr-2" th:text="${averageRating == 0.0} ? '등록된 평점이 없습니다!' : '평균 평점 : ' + ${averageRating}"></p>
                <div th:if="${averageRating != 0.0}" class="flex flex-row justify-start align-center">
                    <img th:each="i : ${#numbers.sequence(1, averageRating)}" src="/images/full_star.png" style="width: 20px; height: 20px" class="flex flex-inline"/>
                    <span th:if="${averageRating%1.0 != 0}" class="flex flex-inline">
                    <!-- 반 별 출력-->
                    <img src="/images/half_star.png" style="width: 20px; height: 20px"/>
                    <span th:if="${averageRating < 4}" class="flex flex-inline">
                        <img th:each="i : ${#numbers.sequence(averageRating + 2, 5)}" src="/images/empty_star.png" style="width: 20px; height: 20px"
                             th:if="${averageRating < 5}"/>
                    </span>
                </span>
                    <span th:if="${averageRating%1.0 == 0}" class="flex flex-inline">
                    <img th:each="i : ${#numbers.sequence(averageRating + 1, 5)}"
                         th:if="${averageRating < 5}" src="/images/empty_star.png" style="width: 20px; height: 20px"/>
                </span>
                </div>
            </div>

            <h2 th:text="'로그인 멤버 id = ' + ${loginMember}"></h2>
            <form class="mt-5 mb-5" th:action="@{/api/comment/{postId}(postId=${postId})}" th:object="${commentRequestDto}" method="post" enctype="multipart/form-data" onsubmit="return validateForm()"
                  th:data-post-id="${postId}" th:data-region-major="${regionMajor}">
                <label th:for="content" class="block text-lg font-semibold mb-2"><strong>댓글 작성</strong></label>

                <div class="flex flex-col">
                    <!--                    여행후기 게시판에만 평점 등록-->
                    <div th:if="${post.boardCategory == '여행후기'}">
                        <label for="rating" class="block text-sm text-gray-700 mb-1">평점</label>
                        <select th:field="*{rating}" id="rating" class="border border-gray-300 rounded-lg p-2 mb-2" style="max-width: 120px;">
                            <option value="5">★★★★★</option>
                            <option value="4">★★★★☆</option>
                            <option value="3">★★★☆☆</option>
                            <option value="2">★★☆☆☆</option>
                            <option value="1">★☆☆☆☆</option>
                        </select>
                    </div>

                    <textarea th:field="*{content}" class="flex-1 border border-gray-300 rounded-lg p-2 focus:outline-none focus:ring-2 focus:ring-blue-500 mb-2" placeholder="작성 내용을 입력하세요" rows="5" required></textarea>

                    <div class="mb-2">
                        <input type="file" th:field="*{photos}" multiple id="file-input" class="hidden" />
                        <span class="text-sm text-gray-500 mt-2 block">최대 5개 사진 업로드 가능, 각 사진은 16MB 이하만 가능</span>
                        <div id="file-info" class="mt-2 text-gray-500"></div>

                        <div class="flex flex-row justify-between">
                            <label for="file-input" class="flex items-center justify-center px-4 py-2 bg-blue-500 text-white rounded-lg cursor-pointer hover:bg-blue-600 transition duration-300">
                                파일 선택하기
                            </label>
                            <button type="submit" class="bg-blue-500 text-white rounded-lg px-2 py-2 hover:bg-blue-600 transition duration-300">댓글 작성</button>
                        </div>
                    </div>
                </div>

                <div class="error-class mt-2 text-red-600" th:errors="*{content}"></div>
            </form>

            <!-- 정렬 조건 입력 -->
            <form id="sortForm" th:action="@{/boards/{regionMajor}/posts/{postId}(regionMajor=${regionMajor}, postId=${postId})}" method="get" th:object="${commentPagingInfo}"
                  class="flex flex-col space-y-4 p-4 mb-4">
                <label class="font-semibold text-lg">댓글 정렬 기준 선택</label>
                <div class="flex justify-start">
                    <select id="commentPagingSize" name="commentPagingSize" th:field="*{commentPagingSize}"
                            class="border border-gray-300 rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-blue-500 mr-2">
                        <option value="1" th:selected="${commentPagingInfo.commentPagingSize == 1}">1개씩 보기</option>
                        <option value="5" th:selected="${commentPagingInfo.commentPagingSize == 5}">5개씩 보기</option>
                        <option value="10" th:selected="${commentPagingInfo.commentPagingSize == 10}">10개씩 보기</option>

                    </select>
                    <select id="commentSort" name="commentSort" th:field="*{commentSort}"
                            class="border border-gray-300 rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
                        <option value="createdAt" th:selected="${commentPagingInfo.commentSort == 'createdAt'}">최신순</option>
                        <option value="commentLikes" th:selected="${commentPagingInfo.commentSort == 'commentLikes'}">추천순</option>
                    </select>

                    <button type="button" onclick="submitForm()" class="ml-2 bg-orange-500 text-white py-2 px-4 rounded-md hover:bg-orange-600 transition duration-200">
                        정렬
                    </button>
                </div>

            </form>

            <div th:each="comment : ${comments}" class="flex items-start mb-4">
                <div class="flex w-2 h-2 bg-gray-400 rounded-full mr-4 mt-3"></div>
                <div class="flex-1">
                    <div class="flex flex-row justify-between items-center">


                        <div class="flex flex-row items-center">
                            <p class="font-bold mt-1 mb-2" th:text="${comment.getMember().name}"></p>
                            <!--                            여행후기 게시판에만 평점 출력-->
                            <div class="ml-2 flex flex-row items-center" th:if="${post.boardCategory == '여행후기'}">
                                <img th:each="i : ${#numbers.sequence(1, comment.getRating())}" src="/images/full_star.png" class="w-5 h-5 -translate-y-1"/>
                                <img th:each="i : ${#numbers.sequence(comment.getRating() + 1, 5)}" src="/images/empty_star.png" class="w-5 h-5 -translate-y-1" th:if="${comment.getRating() < 5}"/>
                            </div>
                        </div>

                        <!-- 로그인 한 회원만 가능 -> 수정 필요 -->
                        <a th:if="${loginMember != null}"
                           th:href="@{/boards/{regionMajor}/posts/{postId}/comments/{commentId}/like(regionMajor=${regionMajor}, postId=${postId}, commentId=${comment.id})}"
                           class="bg-purple-500 text-white font-semibold py-1 px-2 rounded hover:bg-purple-700 items-center rounded-lg mb-2">
                            <span class="material-symbols-outlined" style="font-size: 16px">thumb_up</span>
                            <span th:text="${comment.getCommentLikes().size()}" style="font-size: 12px"></span>
                        </a>
                    </div>

                    <div class="relative mb-1">
                        <div class="bg-gray-200 p-4 rounded-lg">
                            <span th:text="${comment.content}"></span>
                            <div th:if="${comment.getCommentPhotos().size() > 0}">
                                <p class="text-sm mt-6">첨부한 이미지</p>
                                <div class="img-container">
                                    <div class="mt-1" th:each="photo : ${comment.getCommentPhotos()}">
                                        <a href="#" class="image-link" th:data-base64="${photo.base64Image}" onclick="openImage(this.dataset.base64)">
                                            <img th:src="'data:image/jpeg;base64,' + ${photo.base64Image}"/>
                                        </a>
                                    </div>
                                </div>
                            </div>

                            <!-- 로그인 정보 일치하는 회원만 수정, 삭제 가능함-->
                            <div class="flex justify-end mt-2 mb-1">
                                <p th:if="${loginMember != null and loginMember == comment.member.id}">
                                    <a th:href="@{/boards/{regionMajor}/posts/{postId}/comments/{commentId}(regionMajor=${regionMajor}, postId=${postId}, commentId=${comment.id})}">
                                        <span class="material-symbols-outlined" style="color: blue">edit_note</span>
                                    </a>
                                    <button type="button" onclick="deleteComment(this)" th:data-id="${comment.id}">
                                        <span class="material-symbols-outlined" style="color: red">delete</span>
                                    </button>
                                </p>
                            </div>
                        </div>
                    </div>
                    <div class="flex justify-between mb-2">

                        <button class="text-gray-500" id="showRepliesButton" onclick="toggleReplies(this)" th:data-comment-id="${comment.id}" >대댓글 보기</button>

                        <span class="text-gray-500 text-sm ml-1"
                              th:text="${comment.editedAt==null} ?
                                    ${#temporals.format(comment.createdAt, 'yyyy-MM-dd HH:mm')} : ${'(수정) ' + #temporals.format(comment.createdAt, 'yyyy-MM-dd HH:mm')}"></span>
                    </div>

                    <div th:id="'replyContainer-' + ${comment.id}" th:data-login-member-id="${loginMember}" th:data-region-major="${regionMajor}" th:data-post-id="${post.id}"
                         class="mt-10 border border-gray-300 rounded-lg p-4" style="display: none;"></div> <!-- 기본적으로 숨김 -->

                </div>
            </div>

            <div class="pagination">
                <button class="pagination-button" th:disabled="${comments.getNumber()}==0"
                        th:onclick="|location.href='@{/boards/{regionMajor}/posts/{postId}(regionMajor=${regionMajor}, postId=${postId}, commentPage=${1}, commentPagingSize=${commentPagingInfo.commentPagingSize}, commentSort=${commentPagingInfo.commentSort} ) }'|">
                    <<</button>
                <button class="pagination-button" th:disabled="${!comments.hasPrevious()}"
                        th:onclick="|location.href='@{/boards/{regionMajor}/posts/{postId}(regionMajor=${regionMajor}, postId=${postId}, commentPage=${comments.getNumber()}, commentPagingSize=${commentPagingInfo.commentPagingSize}, commentSort=${commentPagingInfo.commentSort} ) }'|">
                    <</button>
                &nbsp; &nbsp;
                <span class="pagination-info">[[${comments.getNumber()+1}]] / [[${comments.getTotalElements() == 0 ? 1 : comments.getTotalPages()}]]</span>
                &nbsp; &nbsp;
                <button class="pagination-button" th:disabled="${!comments.hasNext()}"
                        th:onclick="|location.href='@{/boards/{regionMajor}/posts/{postId}(regionMajor=${regionMajor}, postId=${postId}, commentPage=${comments.getNumber()+2}, commentPagingSize=${commentPagingInfo.commentPagingSize}, commentSort=${commentPagingInfo.commentSort} ) }'|">
                    ></button>
                <button class="pagination-button" th:disabled="${!comments.hasNext()}"
                        th:onclick="|location.href='@{/boards/{regionMajor}/posts/{postId}(regionMajor=${regionMajor}, postId=${postId}, commentPage=${comments.getTotalPages()}, commentPagingSize=${commentPagingInfo.commentPagingSize}, commentSort=${commentPagingInfo.commentSort} ) }'|">
                    >></button>
            </div>
        </div>

    </main>
</div>

<div th:replace="~{fragments/footer :: footer}"></div>
</body>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="/js/footer.js"></script>
<script src="/js/post_delete.js"></script>
<script src="/js/post_photos.js"></script>
<script src="/js/comment_photos.js"></script>
<script src="/js/comment_delete.js"></script>
<script src="/js/comment_sort.js"></script>
<script src="/js/reply.js"></script>
</html>